Open PicoBlaze Assembler log for program "uart_kcpsm3.psm"
Generated by opbasm v1.3
  Assembled on 2019-07-06T22:42:23
  PicoBlaze-3 mode

  Last occupied address: 045 hex
  Nominal program memory size: 1K (1024)  address(9:0)
  Actual memory size: 1024
  Occupied memory locations: 70
  Memory locations available: 954
  Scratchpad size: 64


Assembly listing
----------------
000                             ;Declare necessary constants used

000                             ;   KCPSM3-USER
000                             CONSTANT UART_status_port_user, 01
000                             CONSTANT UART_read_port_user, 02
000                             CONSTANT UART_write_port_user, 08
000                             CONSTANT tx_half_full_user, 00
000                             CONSTANT tx_full_user, 01
000                             CONSTANT rx_half_full_user, 02
000                             CONSTANT rx_full_user, 03
000                             CONSTANT rx_data_present_user, 04

000                             ;   PWM_GAUGE-KCPSM3
000                             CONSTANT UART_status_port_pwm_gauge, 03
000                             CONSTANT UART_read_port_pwm_gauge, 04
000                             CONSTANT rx_half_full_pwm_gauge, 00
000                             CONSTANT rx_full_pwm_gauge, 01
000                             CONSTANT rx_data_present_pwm_gauge, 02

000                             ;   KCPSM3-SSEG
000                             CONSTANT UART_status_port_sseg, 05
000                             CONSTANT UART_write_port_sseg, 10
000                             CONSTANT UART_write_sseg, 40
000                             CONSTANT tx_half_full_sseg, 00
000                             CONSTANT tx_full_sseg, 01

000                             ;   KCPSM3-LED
000                             CONSTANT UART_status_port_led, 06
000                             CONSTANT UART_write_port_led, 20
000                             CONSTANT tx_half_full_led, 00
000                             CONSTANT tx_full_led, 01

000                             NAMEREG sf, UART_data_user     ;used to pass data to and from the UART
000                             NAMEREG se, UART_data_led
000                             NAMEREG sd, UART_data_sseg
000                             NAMEREG sc, UART_data_pwm_gauge

000                             NAMEREG sb, store_pointer      ;used to pass location of data in scratch pad memory

000                             NAMEREG s1, dividend           ; preserved
000                             NAMEREG s2, divisor            ; preserved
000                             NAMEREG s3, quotient           ; preserved
000                             NAMEREG s4, remainder          ; modified
000                             NAMEREG s5, bit_mask           ; used to test bits in dividend

000                             ;ASCII table

000                             CONSTANT character_a, 61
000                             CONSTANT character_b, 62
000                             CONSTANT character_c, 63
000                             CONSTANT character_d, 64
000                             CONSTANT character_e, 65
000                             CONSTANT character_f, 66
000                             CONSTANT character_g, 67
000                             CONSTANT character_h, 68
000                             CONSTANT character_i, 69
000                             CONSTANT character_j, 6A
000                             CONSTANT character_k, 6B
000                             CONSTANT character_l, 6C
000                             CONSTANT character_m, 6D
000                             CONSTANT character_n, 6E
000                             CONSTANT character_o, 6F
000                             CONSTANT character_p, 70
000                             CONSTANT character_q, 71
000                             CONSTANT character_r, 72
000                             CONSTANT character_s, 73
000                             CONSTANT character_t, 74
000                             CONSTANT character_u, 75
000                             CONSTANT character_v, 76
000                             CONSTANT character_w, 77
000                             CONSTANT character_x, 78
000                             CONSTANT character_y, 79
000                             CONSTANT character_z, 7A
000                             CONSTANT character_A, 41
000                             CONSTANT character_B, 42
000                             CONSTANT character_C, 43
000                             CONSTANT character_D, 44
000                             CONSTANT character_E, 45
000                             CONSTANT character_F, 46
000                             CONSTANT character_G, 47
000                             CONSTANT character_H, 48
000                             CONSTANT character_I, 49
000                             CONSTANT character_J, 4A
000                             CONSTANT character_K, 4B
000                             CONSTANT character_L, 4C
000                             CONSTANT character_M, 4D
000                             CONSTANT character_N, 4E
000                             CONSTANT character_O, 4F
000                             CONSTANT character_P, 50
000                             CONSTANT character_Q, 51
000                             CONSTANT character_R, 52
000                             CONSTANT character_S, 53
000                             CONSTANT character_T, 54
000                             CONSTANT character_U, 55
000                             CONSTANT character_V, 56
000                             CONSTANT character_W, 57
000                             CONSTANT character_X, 58
000                             CONSTANT character_Y, 59
000                             CONSTANT character_Z, 5A
000                             CONSTANT character_0, 30
000                             CONSTANT character_1, 31
000                             CONSTANT character_2, 32
000                             CONSTANT character_3, 33
000                             CONSTANT character_4, 34
000                             CONSTANT character_5, 35
000                             CONSTANT character_6, 36
000                             CONSTANT character_7, 37
000                             CONSTANT character_8, 38
000                             CONSTANT character_9, 39
000                             CONSTANT character_colon, 3A
000                             CONSTANT character_semi_colon, 3B
000                             CONSTANT character_less_than, 3C
000                             CONSTANT character_greater_than, 3E
000                             CONSTANT character_equals, 3D
000                             CONSTANT character_space, 20
000                             CONSTANT character_CR, 0D      ;carriage return
000                             CONSTANT character_question, 3F ;'?'
000                             CONSTANT character_dollar, 24
000                             CONSTANT character_BS, 08      ;Back Space command character


000                 initialize:
000  00F4E                      LOAD UART_data_user, character_N
001  30022                      CALL send_to_UART_user
002  00F4E                      LOAD UART_data_user, character_N
003  30022                      CALL send_to_UART_user

004  00E7F                      LOAD UART_data_led, 7F
005  3002E                      CALL send_to_UART_led
006  00E14                      LOAD UART_data_led, 14
007  3002E                      CALL send_to_UART_led
008  00E7F                      LOAD UART_data_led, 7F
009  3002E                      CALL send_to_UART_led
00A  00D02                      LOAD UART_data_sseg, 02
00B  30028                      CALL send_to_UART_sseg
00C  00D02                      LOAD UART_data_sseg, 02
00D  30028                      CALL send_to_UART_sseg
00E  00D02                      LOAD UART_data_sseg, 02
00F  30028                      CALL send_to_UART_sseg


010                             ;   Program loop
010               program_loop:
010  30034                      CALL read_from_UART_pwm
011  011C0                      LOAD dividend, UART_data_pwm_gauge

012  00264                      LOAD divisor, 64
013  3003A                      CALL divide
014  01D30                      LOAD UART_data_sseg, quotient
015  30028                      CALL send_to_UART_sseg

016  30022                      CALL send_to_UART_user

017  0020A                      LOAD divisor, 0A
018  3003A                      CALL divide
019  01D30                      LOAD UART_data_sseg, quotient
01A  30028                      CALL send_to_UART_sseg

01B  30022                      CALL send_to_UART_user

01C  00201                      LOAD divisor, 01
01D  3003A                      CALL divide
01E  01D30                      LOAD UART_data_sseg, quotient
01F  30028                      CALL send_to_UART_sseg

020  30022                      CALL send_to_UART_user

021  34021                 end: JUMP end



022  04001   send_to_UART_user: INPUT s0, UART_status_port_user
023  12001                      TEST s0, tx_full_user
024  35026                      JUMP Z, UART_write_user
025  34022                      JUMP send_to_UART_user
026  2CF08     UART_write_user: OUTPUT UART_data_user, UART_write_port_user
027  2A000                      RETURN

028  04005   send_to_UART_sseg: INPUT s0, UART_status_port_sseg
029  12001                      TEST s0, tx_full_sseg
02A  3502C                      JUMP Z, UART_write_sseg
02B  34028                      JUMP send_to_UART_sseg
02C  2CD10     UART_write_sseg: OUTPUT UART_data_sseg, UART_write_port_sseg
02D  2A000                      RETURN


02E  04006    send_to_UART_led: INPUT s0, UART_status_port_led
02F  12001                      TEST s0, tx_full_led
030  35032                      JUMP Z, UART_write_led
031  3402E                      JUMP send_to_UART_led
032  2CE20      UART_write_led: OUTPUT UART_data_led, UART_write_port_led
033  2A000                      RETURN

034  04003  read_from_UART_pwm: INPUT s0, UART_status_port_pwm_gauge
035  12002                      TEST s0, rx_data_present_pwm_gauge
036  35438                      JUMP NZ, read_pwm_number
037  34034                      JUMP read_from_UART_pwm

038  04C04     read_pwm_number: INPUT UART_data_pwm_gauge, UART_read_port_pwm_gauge
039  2A000                      RETURN

03A                     divide:
03A  00400                      LOAD remainder, 00
03B  00580                      LOAD bit_mask, 80
03C              division_loop:
03C  13150                      TEST dividend, bit_mask
03D  20400                      SLA remainder
03E  20306                      SL0 quotient
03F  15420                      COMPARE remainder, divisor
040  35843                      JUMP C, no_sub
041  1D420                      SUB remainder, divisor
042  18301                      ADD quotient, 01
043                     no_sub:
043  2050E                      SR0 bit_mask
044  3543C                      JUMP NZ, division_loop
045  2A000                      RETURN



All unused memory locations contain zero (equivalent to "LOAD s0, 00")


PSM files that have been assembled
----------------------------------
    /home/paul/Documents/Laboratory_reports/PUR/PUR_Project/PUR_Project/Software/uart_kcpsm3.psm


List of defined constants
-------------------------
    CONSTANT name               Value  Source PSM file
 ----------------               -----  ---------------
    BEL                         07
    BS                          08
    CR                          0D
    DCS                         90
    DEL                         7F
    ESC                         1B
    HT                          09
    LF                          0A
    NUL                         00
    ST                          9C
    UART_read_port_pwm_gauge    04     uart_kcpsm3.psm
 *  UART_read_port_user         02     uart_kcpsm3.psm
    UART_status_port_led        06     uart_kcpsm3.psm
    UART_status_port_pwm_gauge  03     uart_kcpsm3.psm
    UART_status_port_sseg       05     uart_kcpsm3.psm
    UART_status_port_user       01     uart_kcpsm3.psm
    UART_write_port_led         20     uart_kcpsm3.psm
    UART_write_port_sseg        10     uart_kcpsm3.psm
    UART_write_port_user        08     uart_kcpsm3.psm
 *  UART_write_sseg             40     uart_kcpsm3.psm
    VT                          0B
 *  character_0                 30     uart_kcpsm3.psm
 *  character_1                 31     uart_kcpsm3.psm
 *  character_2                 32     uart_kcpsm3.psm
 *  character_3                 33     uart_kcpsm3.psm
 *  character_4                 34     uart_kcpsm3.psm
 *  character_5                 35     uart_kcpsm3.psm
 *  character_6                 36     uart_kcpsm3.psm
 *  character_7                 37     uart_kcpsm3.psm
 *  character_8                 38     uart_kcpsm3.psm
 *  character_9                 39     uart_kcpsm3.psm
 *  character_A                 41     uart_kcpsm3.psm
 *  character_B                 42     uart_kcpsm3.psm
 *  character_BS                08     uart_kcpsm3.psm
 *  character_C                 43     uart_kcpsm3.psm
 *  character_CR                0D     uart_kcpsm3.psm
 *  character_D                 44     uart_kcpsm3.psm
 *  character_E                 45     uart_kcpsm3.psm
 *  character_F                 46     uart_kcpsm3.psm
 *  character_G                 47     uart_kcpsm3.psm
 *  character_H                 48     uart_kcpsm3.psm
 *  character_I                 49     uart_kcpsm3.psm
 *  character_J                 4A     uart_kcpsm3.psm
 *  character_K                 4B     uart_kcpsm3.psm
 *  character_L                 4C     uart_kcpsm3.psm
 *  character_M                 4D     uart_kcpsm3.psm
    character_N                 4E     uart_kcpsm3.psm
 *  character_O                 4F     uart_kcpsm3.psm
 *  character_P                 50     uart_kcpsm3.psm
 *  character_Q                 51     uart_kcpsm3.psm
 *  character_R                 52     uart_kcpsm3.psm
 *  character_S                 53     uart_kcpsm3.psm
 *  character_T                 54     uart_kcpsm3.psm
 *  character_U                 55     uart_kcpsm3.psm
 *  character_V                 56     uart_kcpsm3.psm
 *  character_W                 57     uart_kcpsm3.psm
 *  character_X                 58     uart_kcpsm3.psm
 *  character_Y                 59     uart_kcpsm3.psm
 *  character_Z                 5A     uart_kcpsm3.psm
 *  character_a                 61     uart_kcpsm3.psm
 *  character_b                 62     uart_kcpsm3.psm
 *  character_c                 63     uart_kcpsm3.psm
 *  character_colon             3A     uart_kcpsm3.psm
 *  character_d                 64     uart_kcpsm3.psm
 *  character_dollar            24     uart_kcpsm3.psm
 *  character_e                 65     uart_kcpsm3.psm
 *  character_equals            3D     uart_kcpsm3.psm
 *  character_f                 66     uart_kcpsm3.psm
 *  character_g                 67     uart_kcpsm3.psm
 *  character_greater_than      3E     uart_kcpsm3.psm
 *  character_h                 68     uart_kcpsm3.psm
 *  character_i                 69     uart_kcpsm3.psm
 *  character_j                 6A     uart_kcpsm3.psm
 *  character_k                 6B     uart_kcpsm3.psm
 *  character_l                 6C     uart_kcpsm3.psm
 *  character_less_than         3C     uart_kcpsm3.psm
 *  character_m                 6D     uart_kcpsm3.psm
 *  character_n                 6E     uart_kcpsm3.psm
 *  character_o                 6F     uart_kcpsm3.psm
 *  character_p                 70     uart_kcpsm3.psm
 *  character_q                 71     uart_kcpsm3.psm
 *  character_question          3F     uart_kcpsm3.psm
 *  character_r                 72     uart_kcpsm3.psm
 *  character_s                 73     uart_kcpsm3.psm
 *  character_semi_colon        3B     uart_kcpsm3.psm
 *  character_space             20     uart_kcpsm3.psm
 *  character_t                 74     uart_kcpsm3.psm
 *  character_u                 75     uart_kcpsm3.psm
 *  character_v                 76     uart_kcpsm3.psm
 *  character_w                 77     uart_kcpsm3.psm
 *  character_x                 78     uart_kcpsm3.psm
 *  character_y                 79     uart_kcpsm3.psm
 *  character_z                 7A     uart_kcpsm3.psm
    datestamp_day               06
    datestamp_month             07
    datestamp_year              13
    rx_data_present_pwm_gauge   02     uart_kcpsm3.psm
 *  rx_data_present_user        04     uart_kcpsm3.psm
 *  rx_full_pwm_gauge           01     uart_kcpsm3.psm
 *  rx_full_user                03     uart_kcpsm3.psm
 *  rx_half_full_pwm_gauge      00     uart_kcpsm3.psm
 *  rx_half_full_user           02     uart_kcpsm3.psm
    timestamp_hours             16
    timestamp_minutes           2A
    timestamp_seconds           17
    tx_full_led                 01     uart_kcpsm3.psm
    tx_full_sseg                01     uart_kcpsm3.psm
    tx_full_user                01     uart_kcpsm3.psm
 *  tx_half_full_led            00     uart_kcpsm3.psm
 *  tx_half_full_sseg           00     uart_kcpsm3.psm
 *  tx_half_full_user           00     uart_kcpsm3.psm

       * Unreferenced constant(s)


  No tables defined


List of text strings
--------------------
    STRING name  Value          Source PSM file
 --------------  -----          ---------------
    datestamp$   "06 Jul 2019"
    timestamp$   "22:42:23"


List of line labels
-------------------
    Label               Addr  Source PSM file
 --------               ----  ---------------
    UART_write_led      032   uart_kcpsm3.psm
    UART_write_sseg     02C   uart_kcpsm3.psm
    UART_write_user     026   uart_kcpsm3.psm
    divide              03A   uart_kcpsm3.psm
    division_loop       03C   uart_kcpsm3.psm
    end                 021   uart_kcpsm3.psm
 *  initialize          000   uart_kcpsm3.psm
    no_sub              043   uart_kcpsm3.psm
 *  program_loop        010   uart_kcpsm3.psm
    read_from_UART_pwm  034   uart_kcpsm3.psm
    read_pwm_number     038   uart_kcpsm3.psm
    send_to_UART_led    02E   uart_kcpsm3.psm
    send_to_UART_sseg   028   uart_kcpsm3.psm
    send_to_UART_user   022   uart_kcpsm3.psm

       * Unreferenced label(s)


List of pragma blocks
---------------------
   Name  Addr range  Value
   ----  ----------  -----


Instruction usage statistics
----------------------------
   Instruction  Instances
   -----------  ---------
   ADD          1
   ADDCY        -
   AND          -
   CALL         18
   COMPARE      1
   DISABLE      -
   ENABLE       -
   FETCH        -
   INPUT        5
   JUMP         11
   LOAD         17
   OR           -
   OUTPUT       3
   RETURN       5
   RETURNI      -
   RL           -
   RR           -
   SL0          1
   SL1          -
   SLA          1
   SLX          -
   SR0          1
   SR1          -
   SRA          -
   SRX          -
   STORE        -
   SUB          1
   SUBCY        -
   TEST         5
   XOR          -
